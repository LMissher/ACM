# codeforces 1045G
http://codeforces.com/problemset/problem/1045/G

给 n 个数 xi ，以及他们能覆盖左右两边的长度 leni ，以及一个相等值 qi 。  
如果两个位置互相能覆盖(xi+leni>=xj&&xj-lenj<=xi)且两个位置的 abs(qi-qj) <= k 那么答案+1。  
问最后答案是多少。  
把所有的位置按 xi 排序然后记录下每个位置能覆盖的左端点及右端点再用扫描线从左向右扫。  
每到一个点我们把它算入贡献，到它的右端点+1再把它移出贡献，我们只计算每个点的左边的答案，这样答案就会不重不漏。  
具体就是把每个 qi 建立一颗线段树，动态开点。  
每到一个新位置我们将所有在 [qi-k,qi+k] 内的线段树的区间 [pos(xj-lenj),i-1] 求和。  